{% extends "EdukodasTemplateBundle::base.html.twig" %}

{% block main %}

    <div class="row" style="clear: both;">
        <!-- Modal Structure -->
        <div id="manage-task-modal" class="modal valign-wrapper">
            <div class="modal-content">
                <div class="form-content">
                </div>
                <div class="center-align hide" id="task-form-preload">
                    <div class="preloader-wrapper big active">
                        <div class="spinner-layer spinner-blue-only">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="preloader-wrapper small active hide" id="submit-preloader">
                    <div class="spinner-layer spinner-green-only">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div><div class="gap-patch">
                            <div class="circle"></div>
                        </div><div class="circle-clipper right">
                            <div class="circle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col s4">
                <h5>Add task <a
                            class="btn-floating btn-small waves-effect waves-light red"
                            data-task-action="edukodas_tasks_add"
                            href="#manage-task-modal">
                        <i class="small material-icons">note_add</i>
                    </a></h5>
                <div id="tasks-list">
                    {% include "EdukodasTemplateBundle:tasks:listtasks.html.twig" %}
                </div>
            </div>
            <div class="col s8">
                <a
                        class="btn-floating btn-small waves-effect waves-light red"
                        data-points-action="edukodas_points_add"
                        href="#manage-points-modal">
                    <i class="small material-icons">library_add</i>
                </a>
                <div class="section">
                    <ul class="collection" id="points-history-list">
                        {% for pointHistoryEntry in pointHistory %}
                            {# @var pointHistoryEntry \Edukodas\Bundle\StatisticsBundle\Entity\PointHistory #}
                            {% include "EdukodasTemplateBundle:pointhistory:listpoints.html.twig" with {
                                entryId: pointHistoryEntry.id,
                                amount: pointHistoryEntry.amount,
                                studentName: pointHistoryEntry.student.fullName,
                                teacherName: pointHistoryEntry.teacher.fullName,
                                taskName: pointHistoryEntry.task.name,
                                comment: pointHistoryEntry.comment,
                                createdAt: pointHistoryEntry.createdAt|date('Y/m/d H:m')
                            } %}
                        {% else %}
                            No point history
                        {% endfor %}
                    </ul>
                </div>

            </div>
        </div>

    </div>
    {% include '@EdukodasTemplate/Profile/inc/_pointHistoryModal.html.twig' with {
        'courses': user.courses,
        'form': addPointsForm
    } %}
    {% include '@EdukodasTemplate/Profile/inc/_editPointHistoryModal.html.twig' %}
{% endblock %}
